<!DOCTYPE html>
<meta charset="utf-8">
<title>Test console log are present</title>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="/resources/testdriver.js"></script>
<script>
    promise_test(async () => {
        const some_message = "SOME MESSAGE";
        // Enable log.entryAdded BiDi events.
        await test_driver.bidi.log.entry_added.subscribe();
        // Add a listener for the log.entryAdded event.
        const log_entry_promise = test_driver.bidi.log.entry_added.once();
        // Emit a console.log message.
        console.log(some_message)
        // Wait for the log.entryAdded event to be received.
        const event = await log_entry_promise;
        // Assert the log.entryAdded event has the expected message.
        assert_equals(event.args.length, 1);
        const event_message = event.args[0];
        assert_equals(event_message.value, some_message);
        await test_driver.bidi.log.entry_added.unsubscribe();
    }, "Assert log event are logged");
</script>
